<h1>Manager Dashboard</h1>

<h2>Tasks</h2>

<turbo-frame id="tasks-table">
  <%= render partial: "dashboard/tasks_table", locals: { tasks: @tasks } %>
</turbo-frame>

<turbo-frame id="task-stats">
  <%= render partial: "dashboard/task_stats", locals: { tasks: @tasks } %>
</turbo-frame>

<hr>

<h2>Create Task</h2>

<turbo-frame id="task-form">
  <%= render "tasks/form", task: @task, employees: @employees %>
</turbo-frame>

<turbo-frame id="task-msg"></turbo-frame>

<%= turbo_stream_from "task_stats" %>
<%= turbo_stream_from "tasks_table" %>

<h2>AI Team Summary</h2>
<div id="ai-summary">
  <p><%= @ai_summary %></p>
</div>

<h2>AI Suggestions</h2>
<div id="ai-suggestions">
  <ul>
    <% @ai_suggestions.each do |suggestion| %>
      <li><%= suggestion %></li>
    <% end %>
  </ul>
</div>

<%= button_to "Refresh AI",
    ai_refresh_dashboard_index_path,
    method: :post,
    form: { data: { turbo_stream: true } } %>


