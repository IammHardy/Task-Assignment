<!-- app/views/dashboard/_tasks_table.html.erb -->
<div class="overflow-x-auto">
  <!-- Tasks Table -->
<div class="mb-8 bg-white shadow rounded-lg p-6 border border-gray-200">
  <h2 class="text-2xl font-semibold mb-4">Tasks</h2>
  <table class="w-full table-auto border-collapse border border-gray-300">
    <thead class="bg-gray-100">
      <tr>
        <th class="border px-4 py-2">Title</th>
        <th class="border px-4 py-2">Employee</th>
        <th class="border px-4 py-2">Status</th>
      </tr>
    </thead>
    <tbody>
      <% @tasks_to_show.each do |task| %>
        <tr class="<%= task.status == 'completed' ? 'bg-green-50' : task.status == 'overdue' ? 'bg-red-50' : '' %>">
          <td class="border px-4 py-2"><%= task.title %></td>
          <td class="border px-4 py-2"><%= task.user.name %></td>
          <td class="border px-4 py-2"><%= task.status.capitalize %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<!-- Create Task Form -->
<% if @active_view.in?(["admin", "manager"]) %>
  <div class="mb-8 bg-white shadow rounded-lg p-6 border border-gray-200">
    <h2 class="text-2xl font-semibold mb-4">Create Task</h2>
    <%= form_with model: @task || OpenStruct.new(title: "", user_id: nil), url: "#", local: true do |f| %>
      <div class="mb-2">
        <%= f.label :title %>
        <%= f.text_field :title, class: "border rounded px-2 py-1 w-full" %>
      </div>
      <div class="mb-2">
        <%= f.label :assign_to, "Assign to Employee" %>
        <%= f.select :user_id, options_from_collection_for_select(@employees, :id, :name), { prompt: "Select Employee" }, class: "border rounded px-2 py-1 w-full" %>
      </div>
      <%= f.submit "Create Task", class: "bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700" %>
    <% end %>
  </div>
<% end %>

</div>
