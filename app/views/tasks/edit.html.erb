<!-- app/views/tasks/edit.html.erb -->

<div class="max-w-2xl mx-auto mt-8">
  <h1 class="text-2xl font-bold mb-6 text-gray-800 flex items-center space-x-2">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5h6m-6 0l-6 6m6-6v12" />
    </svg>
    Edit Task
  </h1>

  <%= form_with model: @task, url: task_path(@task), method: :patch, data: { turbo: true }, class: "bg-white shadow rounded-lg p-6 space-y-4 border border-gray-200" do |f| %>
    
    <% if @task.errors.any? %>
      <div class="bg-red-100 text-red-700 p-3 rounded">
        <ul class="list-disc list-inside">
          <% @task.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div>
      <%= f.label :title, class: "block font-semibold text-gray-700 mb-1" %>
      <%= f.text_field :title, required: true, class: "w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" %>
    </div>

    <div>
      <%= f.label :description, class: "block font-semibold text-gray-700 mb-1" %>
      <%= f.text_area :description, rows: 3, class: "w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" %>
    </div>

    <div>
      <%= f.label :user_id, "Assign to", class: "block font-semibold text-gray-700 mb-1" %>
      <%= f.select :user_id, @employees.map { |e| [e.name, e.id] }, { include_blank: "Select employee" }, class: "w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" %>
    </div>

    <div>
      <%= f.label :status, class: "block font-semibold text-gray-700 mb-1" %>
      <%= f.select :status, ["pending", "in_progress", "completed"], {}, class: "w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" %>
    </div>

    <div>
      <%= f.label :due_date, class: "block font-semibold text-gray-700 mb-1" %>
      <%= f.date_field :due_date, class: "w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" %>
    </div>

    <div class="flex space-x-2">
      <%= f.submit "Update Task", class: "bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded shadow transition duration-200" %>
      <%= link_to "Cancel", dashboard_index_path, class: "bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded shadow transition duration-200" %>
    </div>

  <% end %>
</div>
